# MineBot ü§ñ

- The Minecraft Chatbot `(MineBot)` was developed for the coursework in `Conversational Agents and Spoken Language Processing (F20CA)` in **Heriot Watt University**.  
- The aim of MineBot is to provide beginners and intermediate Minecraft gamers with a one stop tool to improve their experience of playing minecraft.
<br><br>

# Introduction
MineBot utilises many of the latest technologies and tools to create an open source chatbot for Minecraft. It is aimed providing support to beginners and intermediate players when playing minecraft. It is capable of running models locally without the internet, removing the gating setup through API limits providing a wonderful experience to the users.
<br><br>

# Features üßë‚Äçüíªüë©‚Äçüíª
- **Crafting assistance:** A custom data structure that provides a formula, the crafting table layout and step by step description of the crafting process. A RAG pipeline was used to validate the crafting process further reducing the chances of hallucinations.
- **Exploration assistance:** A custom data structure that provides a descriptive answer to the users question if the context implies an exploration question.
- **Real-time Game State awareness:** A custom data structure that standardises the use the logs generated from a Minecraft Player Logger (Minecraft Plugin) sent to the LLM to provide context aware answers with respect to the minecraft world.

Here is a link to the final paper that contains more information about the project: [paper-link](https://drive.google.com/file/d/12OcG-jS9n5YmI4pyNINSsHFyaLADLxW9/view?usp=sharing)
<br><br>

# Demo
Here is a link to the demo: [demo-link](https://drive.google.com/file/d/1_W0IVUTOxBK_K3sson6NDWB0lrgiI_W_/view?usp=sharing)
<br><br>

# Setup and Feature Toggle
- **Run Setup:**  
To make the project easy to setup and run without much pain we have used the UV package manager. To install UV please take a look into the UV offical documentation. To setup the project run the following command from the root space  

```bash
uv sync --all-groups
```

- **Invoke the project:**  
From the root space run the following command

```bash
uv run main.py
```

- **Incorporating API Key Closed Source Models:**  
To utilised your API key for closed source models work through the following steps:
    1. Look through the following path to enable the system to work on a Closed source model.: ./minecraft_assistant/gradio/gradio_ui.py

    Update the lines 7 and 8 as follows

    ```python
    # Check pydantic-ai docs to find the correct name for your LLM
    AGENT_NAME = "desired agent name as specified by pydantic-ai"
    IS_LOCAL = False
    ```

    2. Look through the following path to share your API key for the closed source model.: ./minecraft_assistant/gradio/gradio_ui.py

    Update the line 34 as follows

    ```python
    agent_name, provider=OpenAIProvider('https://api.deepseek.com', api_key="your api key here")
    ```

At the moment we only support deepseek as it performed the best during our analysis of different models and their knowledge of the game. We plan to introduce more models soon.

- **Incorporating Local LLMs:**  
To utilise local LLMs that are running on localhost through Ollama please look through the following path: ./minecraft_assistant/gradio/gradio_ui.py

Update the lines 7 and 8 as follows

```python
# Check ollama models to find the correct name for your LLM
AGENT_NAME = "desired agent name as specified by ollama"
IS_LOCAL = True
```

- **Incorporating Game State Processing:**  
By default the game state processing has been disabled as it requires downloading the Minecraft Player Logger plugin. To utilise game state processing following the follow steps:

    1. Down the Minecraft Player Logger plugin or any other plugin that can generate a CSV file for the game states.
    2. Share the path of the CSV file on your system into the script at ./minecraft_assistant/agents/agent_utils.py. Here update line 7 as follows

    ```python
    PATH_GAME_STATE_DATASET = "your local path for the CSV generated by the plugin"
    ```
    3. Lastly open the script at ./minecraft_assistant/agents/llm_agent.py. Here update line 136 as follows

    ```python
    final_prompt = prompt + event_summary
    ```

    Additionally increase the window length of event passed to the LLM if the AI cannot recognise game states accurately by changing lines 119 and 120 as follows

    ```python
    if len(events) > "desired integer number as window length > 0":
        previous_idx = "same value as above"
    ```
<br><br>

# Acknowledgements
A big thank you to our supervisor and the that have worked tirelessly to manifest this project. 
